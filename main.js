(()=>{"use strict";var t=document.querySelector(".header__button_add-event"),e=document.querySelector(".control__date"),n=new Date,o=document.querySelector(".control__button_type_prev-month"),r=document.querySelector(".control__button_type_next-month"),i=document.querySelector(".control__button_type_today");function u(t){n.setMonth(n.getMonth()+t),n.getMonth()<0&&(n.setMonth(11),n.setFullYear(n.getFullYear()-1)),n.getMonth()>11&&(n.setMonth(0),n.setFullYear(n.getFullYear()+1)),e.textContent=c(n)}function c(t){var e=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"][t.getMonth()],n=t.getFullYear();return"".concat(e," ").concat(n)}function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function l(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,s(o.key),o)}}function s(t){var e=function(t,e){if("object"!=a(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!=a(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==a(e)?e:String(e)}function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function f(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,y(o.key),o)}}function y(t){var e=function(t,e){if("object"!=p(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!=p(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==p(e)?e:String(e)}function d(t,e,n){return e=m(e),function(t,e){if(e&&("object"===p(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,v()?Reflect.construct(e,n||[],m(t).constructor):e.apply(t,n))}function v(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(v=function(){return!!t})()}function b(){return b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=m(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},b.apply(this,arguments)}function m(t){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},m(t)}function h(t,e){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},h(t,e)}var _=function(t){function e(t,n){var o,r=n.submitCallback;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=d(this,e,[t]))._form=o._popup.querySelector(".popup__form"),o._submitCallback=r,o._submitBtn=o._popup.querySelector(".popup__save-btn"),o._inputLlist=o._form.querySelectorAll(".popup__input"),o}var n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}(e,t),n=e,(o=[{key:"_getInputValues",value:function(){var t={};return this._inputLlist.forEach((function(e){t[e.name]=e.value.trim()})),t}},{key:"setEventListeners",value:function(){var t=this;b(m(e.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(e){e.preventDefault();var n=t._getInputValues();t._submitCallback(n,t._submitBtn)}))}},{key:"close",value:function(){b(m(e.prototype),"close",this).call(this),this._form.reset()}}])&&f(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),e}(function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popup=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this)}var e,n;return e=t,(n=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(t){"Escape"===t.key&&this.close()}},{key:"setEventListeners",value:function(){var t=this;this._popup.addEventListener("mouseup",(function(e){var n=e.target.classList;(n.contains("popup")||n.contains("popup__close-btn"))&&t.close()}))}}])&&l(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}()),g=(localStorage.getItem("events")&&JSON.parse(localStorage.getItem("events")),["понедельник","вторник","среда","четверг","пятница","суббота","воскресенье"]),S=document.querySelector(".calendar");function w(){for(;S.firstChild;)S.removeChild(S.firstChild)}function E(){n.getDate();for(var t=n.getMonth(),e=n.getFullYear(),o=new Date(e,t,1),r=new Date(e,t+1,0).getDate(),i=new Date(e,t,0).getDate(),u=new Date(e,t+1,0),c=o.toLocaleDateString("ru-ru",{weekday:"long",year:"numeric",month:"numeric",day:"numeric"}),a=u.toLocaleDateString("ru-ru",{weekday:"long"}),l=g.indexOf(c.split(", ")[0]),s=g.length-1-g.indexOf(a),p=1;p<=l+r+s;p++){var f=document.createElement("div");if(p<=l)f.classList.add("calendar__prev-month"),f.innerText=i-l+p;else if(p>l&&p<=r+l)f.innerText=p-l,f.classList.add("calendar__this-month"),f.addEventListener("click",(function(){return console.log("click")}));else if(p>r){var y=-1*(r-p+1+l);y+=1,console.log(s,p,l,r),f.classList.add("calendar__next-month"),f.innerText=y}S.append(f)}}E();var O=new _(".popup_type_add-event",{submitCallback:function(t,e){changeSubmitBtnStatus(e,"Сохранение..."),setTimeout(changeSubmitBtnStatus,1e3,e,"Сохранить"),popupProfileOpened.close()}});t.addEventListener("click",(function(){O.open(),O.setEventListeners()})),e.textContent=c(n),o.addEventListener("click",(function(){u(-1),w(),E()})),r.addEventListener("click",(function(){u(1),w(),E()})),i.addEventListener("click",(function(){var t;t=new Date,n.setMonth(t.getMonth()),n.setFullYear(t.getFullYear()),e.textContent=c(n),w(),E()}))})();